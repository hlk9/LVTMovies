@using Movies.DAL.Models
@using Movies.WebApp.ViewModel
@model Movie

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="~/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="~/css/site.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<article>

    <section class="movie-detail position-relative" style="background:url(@Model.BackdropURL)">

        <div class="container">

            <figure class="movie-detail-banner">

                <img src="@Model.PosterURL" alt="">

                <button class="play-btn">
                    <ion-icon name="play-circle-outline"></ion-icon>
                </button>

            </figure>

            <div class="movie-detail-content p-2 rounded-3" style="background-color:rgb(36 44 56 / 60%);">

                @* <p class="detail-subtitle">New Episodes</p> *@

                <h1 class="h1 detail-title">
                    @Model.Title
                </h1>

                <div class="meta-wrapper">

                    <div class="badge-wrapper">
                        <div class="badge badge-fill">PG 13</div>

                        <div class="badge badge-outline">HD</div>
                    </div>

                    <div class="ganre-wrapper">
                        @if (ViewBag.GenreM != null)
                        {
                            foreach (string item in ViewBag.GenreM)
                            {
                                <a href="#">@item</a>
                            }
                        }


                    </div>

                    <div class="date-time">

                        <div>
                            <ion-icon name="calendar-outline"></ion-icon>

                            <time datetime="2021">@ViewBag.ReleaseDate</time>
                        </div>

                        <div>
                            <ion-icon name="time-outline"></ion-icon>

                            <time datetime="PT115M">115 min</time>
                        </div>

                    </div>

                </div>

                <p class="storyline">
                    @Model.Description
                </p>

                <div class="details-actions border-0" style="background-color:rgb(36 44 56 / 0%);">

                    <button class="share">
                        <ion-icon name="share-social"></ion-icon>

                        <span>Chia sẻ</span>
                    </button>

                    <div class="title-wrapper">
                        <p class="title">Thuê phim</p>

                        <p class="text">Chỉ @Model.RentalPrice cho 7 ngày</p>
                    </div>


                    <a class="btn btn-primary" asp-action="CheckOut" asp-controller="Bill" asp-route-mId="@Model.Id">
                        <ion-icon name="play"></ion-icon>

                        <span>Xem ngay</span>
                    </a>




                </div>

                <a href="~/assets/images/movie-4.png" download class="download-btn">
                    <span>Download</span>

                    <ion-icon name="download-outline"></ion-icon>
                </a>

            </div>

        </div>
    </section>





    <!--
      - #TV SERIES
    -->

    <section class="tv-series">
        <div class="container">

            <p class="section-subtitle">Các phim liên quan</p>

            <h2 class="h2 section-title">HOT trong tháng</h2>

            <ul class="movies-list">
                @foreach (MoviePopularViewModel item in ViewBag.PopularMovies)
                {
                    <li>
                        <div class="movie-card">

                            <a asp-controller="Movie" asp-action="Detail" asp-route-id="@item.MovieId">
                                <figure class="card-banner">
                                    <img src="https://image.tmdb.org/t/p/original/@item.PosterPath" alt="">
                                </figure>
                            </a>

                            <div class="title-wrapper">
                                <a href="./movie-details.html">
                                    <h3 class="card-title">@item.Title</h3>
                                </a>

                                <time datetime="2022">@item.ReleaseDate.Year</time>
                            </div>

                            <div class="card-meta">
                                <div class="badge badge-outline">HD</div>

                                <div class="duration">
                                    <ion-icon name="time-outline"></ion-icon>

                                    <time datetime="PT137M">137 min</time>
                                </div>

                                <div class="rating">
                                    <ion-icon name="star"></ion-icon>

                                    <data>@item.Rating</data>
                                </div>
                            </div>

                        </div>
                    </li>
                }

            </ul>

        </div>
    </section>

</article>